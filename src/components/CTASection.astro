---
// CTA (Call-to-Action) bileşeni
// Her makale sonunda yorum, paylaşım ve bülten alanları
---

<div class="mt-12 space-y-8">
  <!-- Yorum Teşvik Alanı -->
  <div class="bg-blue-50 border border-blue-200 rounded-xl p-6">
    <div class="flex items-center mb-4">
      <span class="text-3xl mr-3">💬</span>
      <h3 class="text-xl font-bold text-blue-800">Sizin Deneyimleriniz Neler?</h3>
    </div>
    <p class="text-blue-700 mb-4">
      Bu konuda kişisel deneyimlerinizi aşağıdaki yorum bölümünde paylaşır mısınız?
      Hangi yaklaşımlar size en çok fayda sağladı? Başka okuyucular da sizin tecrübelerinizden öğrenebilir!
    </p>
    <a
      href="#comments-list"
      class="inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"
    >
      <span class="mr-2">👥</span>
      Yorumları Görüntüle & Yorum Yap
    </a>
  </div>

  <!-- Bülten Kayıt Alanı -->
  <div class="bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6">
    <div class="flex items-center mb-4">
      <span class="text-3xl mr-3">📬</span>
      <h3 class="text-xl font-bold text-purple-800">Günlük Kaliteli İçerikler İçin Bültenimize Katılın</h3>
    </div>
    <p class="text-purple-700 mb-6">
      Benzer kaliteli, araştırma temelli içerikleri kaçırmamak için <strong>ücretsiz bültenimize</strong> katılın.
      Her gün e-posta kutunuzda yeni bir bilgi, yeni bir bakış açısı!
    </p>

    <form class="flex flex-col sm:flex-row gap-3" onsubmit="handleNewsletterSubmit(event)">
      <input
        type="email"
        placeholder="E-posta adresiniz..."
        required
        class="flex-1 px-4 py-3 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
      />
      <button
        type="submit"
        class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors font-semibold"
      >
        📧 Bültene Katıl
      </button>
    </form>

    <p class="text-xs text-purple-600 mt-2">
      * İstediğiniz zaman abonelikten çıkabilirsiniz. Spam yapmıyoruz!
    </p>
  </div>
  <!-- Sosyal Paylaşım Alanı - Mobil Optimized -->
  <div class="bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-4 sm:p-6">
    <div class="flex items-center mb-4">
      <span class="text-2xl sm:text-3xl mr-3">📤</span>
      <h3 class="text-lg sm:text-xl font-bold text-green-800">Bu İçeriği Paylaşın</h3>
    </div>
    <p class="text-green-700 mb-4 text-sm sm:text-base">
      Bu makale size faydalı olduysa, sosyal medyada paylaşarak daha fazla kişinin
      bu değerli bilgilere ulaşmasına yardımcı olabilirsiniz!
    </p>

    <!-- Mobil için dikey, desktop için yatay düzen -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:flex lg:flex-wrap gap-3">
      <!-- Twitter Paylaşımı - Çalışıyor -->
      <button
        onclick="shareOnTwitter()"
        class="flex items-center justify-center bg-[#1DA1F2] text-white px-4 py-3 rounded-lg hover:bg-[#1a8cd8] transition-all duration-200 transform hover:scale-105 shadow-md hover:shadow-lg w-full lg:w-auto"
        title="Twitter'da paylaş"
      >
        <span class="mr-2">🐦</span>
        <span class="font-medium">Twitter'da Paylaş</span>
      </button>

      <!-- Link Kopyalama - Çalışıyor -->
      <button
        onclick="copyToClipboard()"
        class="flex items-center justify-center bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-700 transition-all duration-200 transform hover:scale-105 shadow-md hover:shadow-lg w-full lg:w-auto"
        title="Makale linkini kopyala"
      >
        <span class="mr-2">🔗</span>
        <span class="font-medium">Linki Kopyala</span>
      </button>
    </div>

    <!-- Twitter Takip Teşviki -->
    <div class="mt-4 p-3 bg-blue-100 rounded-lg border border-blue-200">
      <div class="flex items-center justify-between flex-wrap gap-2">
        <div class="flex items-center">
          <span class="text-xl mr-2">🐦</span>
          <span class="text-blue-800 text-sm font-medium">@MindVerseDaily'i takip edin!</span>
        </div>
        <a
          href="https://twitter.com/MindVerseDaily"
          target="_blank"
          rel="noopener noreferrer"
          class="bg-[#1DA1F2] text-white px-3 py-1 rounded text-sm hover:bg-[#1a8cd8] transition-colors"
        >
          Takip Et
        </a>
      </div>
    </div>
  </div>
  <!-- İstatistik ve Motivasyon -->
  <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-6">
    <div class="flex items-center justify-between">
      <div>
        <h4 class="font-bold text-yellow-800 mb-2">📊 Bu İçerik Hakkında</h4>
        <p class="text-yellow-700 text-sm">
          <span id="estimated-read-time">~3 dakika</span> okuma süresi •
          Araştırma tabanlı güvenilir içerik
        </p>
      </div>
      <div class="text-4xl">
        🏆
      </div>
    </div>
  </div>
</div>

<script>
  // Bülten kayıt fonksiyonu
  function handleNewsletterSubmit(event) {
    event.preventDefault();
    const email = event.target.querySelector('input[type="email"]').value;

    // LocalStorage'a kaydet (gerçek uygulamada API'ye gönderilir)
    const subscribers = JSON.parse(localStorage.getItem('newsletter_subscribers') || '[]');
    if (!subscribers.includes(email)) {
      subscribers.push(email);
      localStorage.setItem('newsletter_subscribers', JSON.stringify(subscribers));

      // Başarı mesajı
      showMessage('✅ Bültene başarıyla kaydoldunuz! Teşekkürler.', 'success');
      event.target.reset();
    } else {
      showMessage('ℹ️ Bu e-posta adresi zaten kayıtlı.', 'info');
    }
  }  // Sosyal medya paylaşım fonksiyonları - Sadece çalışanlar
  function shareOnTwitter() {
    const url = window.location.href;
    const title = document.title.replace(' | MindVerse', '').replace(' | MindVerse Daily', '');
    const text = `📖 ${title}`;
    const hashtags = 'mindversedaily,blog,bilgi,gelişim,eğitim';

    const twitterUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}&hashtags=${hashtags}&via=MindVerseDaily`;

    // Mobil cihaz kontrolü
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

    if (isMobile) {
      // Mobil: Direkt yönlendirme daha güvenilir
      window.open(twitterUrl, '_blank');
    } else {
      // Desktop: Popup dene, olmazsa yönlendir
      try {
        const popup = window.open(twitterUrl, '_blank', 'width=550,height=420,scrollbars=yes,resizable=yes');
        if (!popup || popup.closed || typeof popup.closed === 'undefined') {
          window.open(twitterUrl, '_blank');
        }
      } catch (error) {
        window.open(twitterUrl, '_blank');
      }
    }

    showMessage('🐦 Twitter paylaşım sayfası açılıyor...', 'info');
  }

  function copyToClipboard() {
    const url = window.location.href;
    const title = document.title.replace(' | MindVerse', '').replace(' | MindVerse Daily', '');
    const shareText = `📖 ${title}\n\n${url}\n\nvia @MindVerseDaily`;

    // Modern tarayıcılar için Clipboard API
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(shareText).then(() => {
        showMessage('🔗 Link ve başlık başarıyla kopyalandı!', 'success');
      }).catch(() => {
        fallbackCopyToClipboard(shareText);
      });
    } else {
      fallbackCopyToClipboard(shareText);
    }
  }

  function fallbackCopyToClipboard(text) {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.left = '-999999px';
    textArea.style.top = '-999999px';
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();

    try {
      const successful = document.execCommand('copy');
      if (successful) {
        showMessage('🔗 Link ve başlık başarıyla kopyalandı!', 'success');
      } else {
        showMessage('❌ Kopyalama başarısız. Manuel olarak kopyalayın.', 'error');
      }
    } catch (err) {
      showMessage('❌ Kopyalama hatası. Manuel olarak kopyalayın.', 'error');
    }

    document.body.removeChild(textArea);
  }

  // Mesaj gösterme fonksiyonu
  function showMessage(message, type) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `fixed top-4 right-4 p-4 rounded-lg text-white z-50 transition-all duration-300 transform ${
      type === 'success' ? 'bg-green-500' :
      type === 'error' ? 'bg-red-500' : 'bg-blue-500'
    }`;
    messageDiv.textContent = message;
    messageDiv.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';

    document.body.appendChild(messageDiv);

    // Animasyon ile göster
    setTimeout(() => messageDiv.style.transform = 'translateX(0)', 10);

    // 4 saniye sonra kaldır
    setTimeout(() => {
      messageDiv.style.transform = 'translateX(100%)';
      setTimeout(() => messageDiv.remove(), 300);
    }, 4000);
  }

  // Sayfa yüklendiğinde okuma süresini hesapla
  document.addEventListener('DOMContentLoaded', function() {
    // Okuma süresini hesapla
    const content = document.querySelector('.prose, article, main');
    if (content) {
      const wordCount = content.textContent.trim().split(/\s+/).length;
      const readTime = Math.max(1, Math.ceil(wordCount / 200)); // Dakikada 200 kelime, minimum 1 dakika
      const readTimeElement = document.getElementById('estimated-read-time');
      if (readTimeElement) {
        readTimeElement.textContent = `~${readTime} dakika`;
      }
    }
  });
</script>
