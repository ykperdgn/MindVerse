---
import Layout from '../../components/Layout.astro';
import { getCollection } from 'astro:content';

// Sadece Türkçe içerikler: _en.md ile bitmeyenler
const astrologyPosts = (await getCollection('astrology')).filter(post => !post.id.endsWith('_en.md'));

// Son 12 Türkçe içerik (her burç için birer tane)
const latestPosts = astrologyPosts
  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
  .slice(0, 12);

// Burçları kategorize et
const zodiacSigns = [
  { key: 'koc', name: 'Koç', symbol: '♈', element: 'Ateş', dates: '21 Mart - 19 Nisan' },
  { key: 'boga', name: 'Boğa', symbol: '♉', element: 'Toprak', dates: '20 Nisan - 20 Mayıs' },
  { key: 'ikizler', name: 'İkizler', symbol: '♊', element: 'Hava', dates: '21 Mayıs - 20 Haziran' },
  { key: 'yengec', name: 'Yengeç', symbol: '♋', element: 'Su', dates: '21 Haziran - 22 Temmuz' },
  { key: 'aslan', name: 'Aslan', symbol: '♌', element: 'Ateş', dates: '23 Temmuz - 22 Ağustos' },
  { key: 'basak', name: 'Başak', symbol: '♍', element: 'Toprak', dates: '23 Ağustos - 22 Eylül' },
  { key: 'terazi', name: 'Terazi', symbol: '♎', element: 'Hava', dates: '23 Eylül - 22 Ekim' },
  { key: 'akrep', name: 'Akrep', symbol: '♏', element: 'Su', dates: '23 Ekim - 21 Kasım' },
  { key: 'yay', name: 'Yay', symbol: '♐', element: 'Ateş', dates: '22 Kasım - 21 Aralık' },
  { key: 'oglak', name: 'Oğlak', symbol: '♑', element: 'Toprak', dates: '22 Aralık - 19 Ocak' },
  { key: 'kova', name: 'Kova', symbol: '♒', element: 'Hava', dates: '20 Ocak - 18 Şubat' },
  { key: 'balik', name: 'Balık', symbol: '♓', element: 'Su', dates: '19 Şubat - 20 Mart' }
];

const elementColors = {
  'Ateş': 'bg-red-500',
  'Toprak': 'bg-green-500',
  'Hava': 'bg-blue-500',
  'Su': 'bg-cyan-500'
};

const today = new Date().toISOString().split('T')[0];
---

<Layout title="Günlük Burç Yorumları - MindVerse Daily">
  <!-- Hero Section -->
  <div class="relative overflow-hidden bg-gradient-to-r from-purple-500 via-blue-500 to-pink-500 text-white">
    <div class="absolute inset-0 bg-white/10"></div>
    <div class="relative container mx-auto px-4 py-20 text-center">
      <span class="inline-flex items-center justify-center w-20 h-20 md:w-28 md:h-28 rounded-full animate-gradient-move bg-gradient-to-br from-blue-500 via-purple-500 to-pink-400 shadow-2xl mb-6 md:mb-8 border-4 border-white/90 backdrop-blur-sm">
        <span class="text-5xl md:text-7xl animate-bounce">🌌</span>
      </span>
      <h1 class="text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-blue-600 via-purple-500 to-pink-400 bg-clip-text text-transparent animate-gradient-move">
        ✨ Astroloji Portalı ✨
      </h1>
      <p class="text-xl md:text-2xl mb-8 max-w-4xl mx-auto text-white/90 leading-relaxed">
        🌟 Günlük, haftalık ve aylık burç yorumları, astroloji rehberleri ve gelişmiş araçlar ile kozmik bilgeliği keşfedin.
      </p>
      <div class="flex flex-wrap justify-center gap-4">
        <a href="#daily-horoscopes" class="bg-white/20 backdrop-blur-md px-8 py-4 rounded-full hover:bg-white/30 transition-all font-semibold transform hover:scale-105">
          📅 Günlük Yorumlar
        </a>
        <a href="#advanced-tools" class="bg-gradient-to-r from-yellow-400 to-orange-400 text-black px-8 py-4 rounded-full hover:from-yellow-300 hover:to-orange-300 transition-all font-semibold transform hover:scale-105">
          🛠️ Gelişmiş Araçlar
        </a>
        <a href="#zodiac-signs" class="bg-white/20 backdrop-blur-md px-8 py-4 rounded-full hover:bg-white/30 transition-all font-semibold transform hover:scale-105">
          ⭐ Tüm Burçlar
        </a>
      </div>
    </div>
  </div>

  <div class="container mx-auto px-4 py-12">
    <!-- Burç Seçim Grid (renkli, modern) -->
    <section id="zodiac-signs" class="mb-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent text-center">
        🔮 Bugünün Burçları
      </h2>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto text-center mb-8">
        Aşk, kariyer, sağlık ve kişisel gelişim için günlük rehberinizi alın.
      </p>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4">
        {zodiacSigns.map((sign) => {
          const signPost = latestPosts.find(post =>
            post.data.zodiacSign === sign.key ||
            post.slug.includes(sign.key)
          );
          const borderColors = {
            'koc': 'border-red-200 hover:border-red-400',
            'boga': 'border-green-200 hover:border-green-400',
            'ikizler': 'border-yellow-200 hover:border-yellow-400',
            'yengec': 'border-blue-200 hover:border-blue-400',
            'aslan': 'border-orange-200 hover:border-orange-400',
            'basak': 'border-indigo-200 hover:border-indigo-400',
            'terazi': 'border-pink-200 hover:border-pink-400',
            'akrep': 'border-red-800 hover:border-red-600',
            'yay': 'border-purple-200 hover:border-purple-400',
            'oglak': 'border-gray-200 hover:border-gray-400',
            'kova': 'border-cyan-200 hover:border-cyan-400',
            'balik': 'border-teal-200 hover:border-teal-400',
          };
          const titleColors = {
            'koc': 'text-red-600',
            'boga': 'text-green-600',
            'ikizler': 'text-yellow-600',
            'yengec': 'text-blue-600',
            'aslan': 'text-orange-600',
            'basak': 'text-indigo-600',
            'terazi': 'text-pink-600',
            'akrep': 'text-red-800',
            'yay': 'text-purple-600',
            'oglak': 'text-gray-700',
            'kova': 'text-cyan-600',
            'balik': 'text-teal-600',
          };
          return (
            <a
              href={signPost ? `/astrology/${signPost.slug}` : '#'}
              class={`group bg-white rounded-2xl p-4 shadow-lg hover:shadow-xl transition-all transform hover:scale-105 border-2 ${borderColors[sign.key]} duration-300`}
            >
              <div class="text-center">
                <div class="text-4xl mb-2 group-hover:scale-110 transition-transform">{sign.symbol}</div>
                <h3 class={`font-bold mb-1 ${titleColors[sign.key]}`}>{sign.name}</h3>
                <p class="text-xs text-gray-500">{sign.dates}</p>
                {signPost ? (
                  <div class="mt-4 text-xs text-green-600 font-medium">
                    ✅ Güncel Yorum Mevcut
                  </div>
                ) : (
                  <div class="mt-4 text-xs text-gray-400">
                    ⏳ Yorum Hazırlanıyor
                  </div>
                )}
              </div>
            </a>
          );
        })}
      </div>
    </section>

    <!-- Son Yorumlar -->
    <section class="mb-16">
      <h2 class="text-3xl font-bold text-center mb-12 text-gray-800">
        📰 En Son Yorumlar
      </h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {latestPosts.slice(0, 6).map((post) => {
          const sign = zodiacSigns.find(s =>
            post.data.zodiacSign === s.key ||
            post.slug.includes(s.key)
          );
          return (
            <article class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group">
              <div class="p-6">
                <div class="flex items-center mb-4">
                  {sign && (
                    <>
                      <span class="text-3xl mr-3">{sign.symbol}</span>
                      <div>
                        <h3 class="font-bold text-lg">{sign.name} Burcu</h3>
                        <p class="text-sm text-gray-500">{sign.dates}</p>
                      </div>
                    </>
                  )}
                </div>
                <h4 class="font-semibold text-gray-800 mb-3 group-hover:text-purple-600 transition-colors">
                  {post.data.title}
                </h4>
                <p class="text-gray-600 text-sm mb-4 line-clamp-3">
                  {post.data.description}
                </p>
                <div class="flex justify-between items-center">
                  <span class="text-xs text-gray-400">
                    {new Date(post.data.pubDate).toLocaleDateString('tr-TR')}
                  </span>
                  <a
                    href={`/astrology/${post.slug}`}
                    class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors"
                  >
                    Yorumu Oku →
                  </a>
                </div>
              </div>
            </article>
          );
        })}
      </div>
    </section>

    <!-- Özellikler (İngilizce sayfadakiyle aynı, Türkçeye çevrildi) -->
    <section id="advanced-tools" class="mb-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent text-center">
        🚀 Gelişmiş Astroloji Araçları
      </h2>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto text-center mb-8">
        Yükselen burç hesaplama, sinastri (ilişki uyumu), gezegen hareketleri ve astroloji analizleri.
      </p>
      <div class="flex flex-wrap justify-center gap-4 mb-8">
        <a href="/astrology/yukselen-burc" class="bg-gradient-to-r from-blue-400 to-purple-400 text-white px-8 py-4 rounded-full font-semibold shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all transform hover:scale-105">
          🌅 Yükselen Burç Hesaplama
        </a>
        <a href="/astrology/sinastri" class="bg-gradient-to-r from-pink-400 to-red-400 text-white px-8 py-4 rounded-full font-semibold shadow-lg hover:from-pink-500 hover:to-red-500 transition-all transform hover:scale-105">
          💞 Sinastri (İlişki Uyumu)
        </a>
        <a href="/astrology/gezegen-hareketleri" class="bg-gradient-to-r from-yellow-400 to-orange-400 text-black px-8 py-4 rounded-full font-semibold shadow-lg hover:from-yellow-500 hover:to-orange-500 transition-all transform hover:scale-105">
          🪐 Gezegen Hareketleri
        </a>
        <a href="/astrology/ay-takvimleri" class="bg-gradient-to-r from-cyan-400 to-blue-400 text-white px-8 py-4 rounded-full font-semibold shadow-lg hover:from-cyan-500 hover:to-blue-500 transition-all transform hover:scale-105">
          🌙 Ay Takvimleri
        </a>
        <a href="/astrology/kisisel-harita" class="bg-gradient-to-r from-green-400 to-emerald-400 text-white px-8 py-4 rounded-full font-semibold shadow-lg hover:from-green-500 hover:to-emerald-500 transition-all transform hover:scale-105">
          🗺️ Kişisel Doğum Haritası
        </a>
        <a href="/astrology/tarot" class="bg-gradient-to-r from-purple-400 to-pink-400 text-white px-8 py-4 rounded-full font-semibold shadow-lg hover:from-purple-500 hover:to-pink-500 transition-all transform hover:scale-105">
          🃏 Tarot & Spiritüel
        </a>
      </div>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
        <div class="text-center p-6 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl">
          <div class="text-4xl mb-4">🔮</div>
          <h3 class="font-bold text-lg mb-2">Günlük Yorumlar</h3>
          <p class="text-gray-600 text-sm">Her gün güncel astroloji yorumları</p>
        </div>
        <div class="text-center p-6 bg-gradient-to-br from-pink-50 to-red-50 rounded-xl">
          <div class="text-4xl mb-4">💕</div>
          <h3 class="font-bold text-lg mb-2">Aşk Rehberi</h3>
          <p class="text-gray-600 text-sm">İlişkiler için özel tavsiyeler</p>
        </div>
        <div class="text-center p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl">
          <div class="text-4xl mb-4">💼</div>
          <h3 class="font-bold text-lg mb-2">Kariyer Tavsiyeleri</h3>
          <p class="text-gray-600 text-sm">İş hayatı için yönlendirme</p>
        </div>
        <div class="text-center p-6 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl">
          <div class="text-4xl mb-4">🌟</div>
          <h3 class="font-bold text-lg mb-2">Şanslı Elementler</h3>
          <p class="text-gray-600 text-sm">Günlük şanslı renk ve sayılar</p>
        </div>
      </div>
    </section>

    <!-- Premium Özellikler -->
    <section class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-2xl p-8 text-center">
      <h2 class="text-3xl font-bold mb-4">🌟 Premium Astroloji Hizmetleri</h2>
      <p class="text-lg opacity-90 mb-6">
        Daha detaylı analiz ve kişiselleştirilmiş yorumlar için
      </p>
      <div class="grid md:grid-cols-3 gap-6 mb-8">
        <div class="bg-white/10 rounded-lg p-4">
          <div class="text-2xl mb-2">📊</div>
          <h3 class="font-semibold mb-2">Doğum Haritası</h3>
          <p class="text-sm opacity-80">Kişiselleştirilmiş detaylı analiz</p>
        </div>
        <div class="bg-white/10 rounded-lg p-4">
          <div class="text-2xl mb-2">💝</div>
          <h3 class="font-semibold mb-2">Uyumluluk Analizi</h3>
          <p class="text-sm opacity-80">İki burç arasında uyumluluk</p>
        </div>
        <div class="bg-white/10 rounded-lg p-4">
          <div class="text-2xl mb-2">📅</div>
          <h3 class="font-semibold mb-2">Aylık Tahminler</h3>
          <p class="text-sm opacity-80">Uzun vadeli astroloji rehberi</p>
        </div>
      </div>
      <button class="bg-white text-purple-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
        Yakında Geliyor! 🚀
      </button>
    </section>
  </div>
  <style>
    .line-clamp-3 {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</Layout>
