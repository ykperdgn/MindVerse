export const prerender = false;

---
import { Astro } from 'astro';
const { request } = Astro;
let error = '';
if (request.method === 'POST') {
  const form = await request.formData();
  const username = form.get('username');
  const password = form.get('password');
  if (username === 'ykperdgn' && password === '13592718Y.e') {
    // Set a simple session cookie (for demonstration, not secure for production)
    Astro.cookies.set('admin_auth', 'true', { path: '/', httpOnly: true });
    return Astro.redirect('/admin/dashboard');
  } else {
    error = 'Kullanıcı adı veya şifre yanlış.';
  }
}
---

<html lang="tr">
  <head>
    <title>Admin Giriş | MindVerse</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/src/styles/global.css" />
  </head>
  <body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-pink-100 to-purple-100">
    <form method="POST" class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm flex flex-col gap-4">
      <h1 class="text-2xl font-bold text-center mb-2">Admin Panel Girişi</h1>
      {error && <div class="text-red-600 text-sm text-center">{error}</div>}
      <input name="username" type="text" placeholder="Kullanıcı Adı" class="border rounded px-3 py-2" required />
      <input name="password" type="password" placeholder="Şifre" class="border rounded px-3 py-2" required />
      <button type="submit" class="bg-gradient-to-r from-blue-500 to-pink-500 text-white font-bold py-2 rounded hover:from-pink-500 hover:to-blue-500 transition-all">Giriş Yap</button>
    </form>
  </body>
</html>
